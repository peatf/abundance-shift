"use strict";var e=require("react"),t=require("zustand"),r=require("@heroicons/react/24/outline");function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var a,o={exports:{}},i={exports:{}},c={};var u,s,l,f,m,d,p,y,g,b,h,v,E,x,w={};
/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function N(){return s||(s=1,"production"===process.env.NODE_ENV?i.exports=function(){if(a)return c;a=1;var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,u=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,m=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,y=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,b=e?Symbol.for("react.block"):60121,h=e?Symbol.for("react.fundamental"):60117,v=e?Symbol.for("react.responder"):60118,E=e?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var a=e.$$typeof;switch(a){case t:switch(e=e.type){case l:case f:case n:case i:case o:case d:return e;default:switch(e=e&&e.$$typeof){case s:case m:case g:case y:case u:return e;default:return a}}case r:return a}}}function w(e){return x(e)===f}return c.AsyncMode=l,c.ConcurrentMode=f,c.ContextConsumer=s,c.ContextProvider=u,c.Element=t,c.ForwardRef=m,c.Fragment=n,c.Lazy=g,c.Memo=y,c.Portal=r,c.Profiler=i,c.StrictMode=o,c.Suspense=d,c.isAsyncMode=function(e){return w(e)||x(e)===l},c.isConcurrentMode=w,c.isContextConsumer=function(e){return x(e)===s},c.isContextProvider=function(e){return x(e)===u},c.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},c.isForwardRef=function(e){return x(e)===m},c.isFragment=function(e){return x(e)===n},c.isLazy=function(e){return x(e)===g},c.isMemo=function(e){return x(e)===y},c.isPortal=function(e){return x(e)===r},c.isProfiler=function(e){return x(e)===i},c.isStrictMode=function(e){return x(e)===o},c.isSuspense=function(e){return x(e)===d},c.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===f||e===i||e===o||e===d||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===y||e.$$typeof===u||e.$$typeof===s||e.$$typeof===m||e.$$typeof===h||e.$$typeof===v||e.$$typeof===E||e.$$typeof===b)},c.typeOf=x,c}():i.exports=(u||(u=1,"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,s=e?Symbol.for("react.concurrent_mode"):60111,l=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,d=e?Symbol.for("react.memo"):60115,p=e?Symbol.for("react.lazy"):60116,y=e?Symbol.for("react.block"):60121,g=e?Symbol.for("react.fundamental"):60117,b=e?Symbol.for("react.responder"):60118,h=e?Symbol.for("react.scope"):60119;function v(e){if("object"==typeof e&&null!==e){var m=e.$$typeof;switch(m){case t:var y=e.type;switch(y){case u:case s:case n:case o:case a:case f:return y;default:var g=y&&y.$$typeof;switch(g){case c:case l:case p:case d:case i:return g;default:return m}}case r:return m}}}var E=u,x=s,N=c,S=i,k=t,R=l,C=n,T=p,I=d,O=r,A=o,P=a,_=f,M=!1;function j(e){return v(e)===s}w.AsyncMode=E,w.ConcurrentMode=x,w.ContextConsumer=N,w.ContextProvider=S,w.Element=k,w.ForwardRef=R,w.Fragment=C,w.Lazy=T,w.Memo=I,w.Portal=O,w.Profiler=A,w.StrictMode=P,w.Suspense=_,w.isAsyncMode=function(e){return M||(M=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),j(e)||v(e)===u},w.isConcurrentMode=j,w.isContextConsumer=function(e){return v(e)===c},w.isContextProvider=function(e){return v(e)===i},w.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},w.isForwardRef=function(e){return v(e)===l},w.isFragment=function(e){return v(e)===n},w.isLazy=function(e){return v(e)===p},w.isMemo=function(e){return v(e)===d},w.isPortal=function(e){return v(e)===r},w.isProfiler=function(e){return v(e)===o},w.isStrictMode=function(e){return v(e)===a},w.isSuspense=function(e){return v(e)===f},w.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===s||e===o||e===a||e===f||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===d||e.$$typeof===i||e.$$typeof===c||e.$$typeof===l||e.$$typeof===g||e.$$typeof===b||e.$$typeof===h||e.$$typeof===y)},w.typeOf=v}()),w)),i.exports}
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function S(){if(f)return l;f=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;return l=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(n,a){for(var o,i,c=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(n),u=1;u<arguments.length;u++){for(var s in o=Object(arguments[u]))t.call(o,s)&&(c[s]=o[s]);if(e){i=e(o);for(var l=0;l<i.length;l++)r.call(o,i[l])&&(c[i[l]]=o[i[l]])}}return c},l}function k(){if(d)return m;d=1;return m="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function R(){return y?p:(y=1,p=Function.call.bind(Object.prototype.hasOwnProperty))}if("production"!==process.env.NODE_ENV){var C=N();o.exports=function(){if(v)return h;v=1;var e=N(),t=S(),r=k(),n=R(),a=function(){if(b)return g;b=1;var e=function(){};if("production"!==process.env.NODE_ENV){var t=k(),r={},n=R();e=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function a(a,o,i,c,u){if("production"!==process.env.NODE_ENV)for(var s in a)if(n(a,s)){var l;try{if("function"!=typeof a[s]){var f=Error((c||"React class")+": "+i+" type `"+s+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[s]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw f.name="Invariant Violation",f}l=a[s](o,s,c,i,null,t)}catch(e){l=e}if(!l||l instanceof Error||e((c||"React class")+": type specification of "+i+" `"+s+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof l+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),l instanceof Error&&!(l.message in r)){r[l.message]=!0;var m=u?u():"";e("Failed "+i+" type: "+l.message+(null!=m?m:""))}}}return a.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(r={})},g=a}(),o=function(){};function i(){return null}return"production"!==process.env.NODE_ENV&&(o=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}),h=function(c,u){var s="function"==typeof Symbol&&Symbol.iterator,l="<<anonymous>>",f={array:y("array"),bigint:y("bigint"),bool:y("boolean"),func:y("function"),number:y("number"),object:y("object"),string:y("string"),symbol:y("symbol"),any:p(i),arrayOf:function(e){return p((function(t,n,a,o,i){if("function"!=typeof e)return new d("Property `"+i+"` of component `"+a+"` has invalid PropType notation inside arrayOf.");var c=t[n];if(!Array.isArray(c))return new d("Invalid "+o+" `"+i+"` of type `"+h(c)+"` supplied to `"+a+"`, expected an array.");for(var u=0;u<c.length;u++){var s=e(c,u,a,o,i+"["+u+"]",r);if(s instanceof Error)return s}return null}))},element:p((function(e,t,r,n,a){var o=e[t];return c(o)?null:new d("Invalid "+n+" `"+a+"` of type `"+h(o)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:p((function(t,r,n,a,o){var i=t[r];return e.isValidElementType(i)?null:new d("Invalid "+a+" `"+o+"` of type `"+h(i)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return p((function(t,r,n,a,o){if(!(t[r]instanceof e)){var i=e.name||l;return new d("Invalid "+a+" `"+o+"` of type `"+((c=t[r]).constructor&&c.constructor.name?c.constructor.name:l)+"` supplied to `"+n+"`, expected instance of `"+i+"`.")}var c;return null}))},node:p((function(e,t,r,n,a){return b(e[t])?null:new d("Invalid "+n+" `"+a+"` supplied to `"+r+"`, expected a ReactNode.")})),objectOf:function(e){return p((function(t,a,o,i,c){if("function"!=typeof e)return new d("Property `"+c+"` of component `"+o+"` has invalid PropType notation inside objectOf.");var u=t[a],s=h(u);if("object"!==s)return new d("Invalid "+i+" `"+c+"` of type `"+s+"` supplied to `"+o+"`, expected an object.");for(var l in u)if(n(u,l)){var f=e(u,l,o,i,c+"."+l,r);if(f instanceof Error)return f}return null}))},oneOf:function(e){return Array.isArray(e)?p((function(t,r,n,a,o){for(var i=t[r],c=0;c<e.length;c++)if(m(i,e[c]))return null;var u=JSON.stringify(e,(function(e,t){return"symbol"===v(t)?String(t):t}));return new d("Invalid "+a+" `"+o+"` of value `"+String(i)+"` supplied to `"+n+"`, expected one of "+u+".")})):("production"!==process.env.NODE_ENV&&o(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),i)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&o("Invalid argument supplied to oneOfType, expected an instance of array."),i;for(var t=0;t<e.length;t++){var a=e[t];if("function"!=typeof a)return o("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+E(a)+" at index "+t+"."),i}return p((function(t,a,o,i,c){for(var u=[],s=0;s<e.length;s++){var l=(0,e[s])(t,a,o,i,c,r);if(null==l)return null;l.data&&n(l.data,"expectedType")&&u.push(l.data.expectedType)}return new d("Invalid "+i+" `"+c+"` supplied to `"+o+"`"+(u.length>0?", expected one of type ["+u.join(", ")+"]":"")+".")}))},shape:function(e){return p((function(t,n,a,o,i){var c=t[n],u=h(c);if("object"!==u)return new d("Invalid "+o+" `"+i+"` of type `"+u+"` supplied to `"+a+"`, expected `object`.");for(var s in e){var l=e[s];if("function"!=typeof l)return g(a,o,i,s,v(l));var f=l(c,s,a,o,i+"."+s,r);if(f)return f}return null}))},exact:function(e){return p((function(a,o,i,c,u){var s=a[o],l=h(s);if("object"!==l)return new d("Invalid "+c+" `"+u+"` of type `"+l+"` supplied to `"+i+"`, expected `object`.");var f=t({},a[o],e);for(var m in f){var p=e[m];if(n(e,m)&&"function"!=typeof p)return g(i,c,u,m,v(p));if(!p)return new d("Invalid "+c+" `"+u+"` key `"+m+"` supplied to `"+i+"`.\nBad object: "+JSON.stringify(a[o],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var y=p(s,m,i,c,u+"."+m,r);if(y)return y}return null}))}};function m(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function d(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function p(e){if("production"!==process.env.NODE_ENV)var t={},n=0;function a(a,i,c,s,f,m,p){if(s=s||l,m=m||c,p!==r){if(u){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var g=s+":"+c;!t[g]&&n<3&&(o("You are manually calling a React.PropTypes validation function for the `"+m+"` prop on `"+s+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),t[g]=!0,n++)}}return null==i[c]?a?null===i[c]?new d("The "+f+" `"+m+"` is marked as required in `"+s+"`, but its value is `null`."):new d("The "+f+" `"+m+"` is marked as required in `"+s+"`, but its value is `undefined`."):null:e(i,c,s,f,m)}var i=a.bind(null,!1);return i.isRequired=a.bind(null,!0),i}function y(e){return p((function(t,r,n,a,o,i){var c=t[r];return h(c)!==e?new d("Invalid "+a+" `"+o+"` of type `"+v(c)+"` supplied to `"+n+"`, expected `"+e+"`.",{expectedType:e}):null}))}function g(e,t,r,n,a){return new d((e||"React class")+": "+t+" type `"+r+"."+n+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+a+"`.")}function b(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(b);if(null===e||c(e))return!0;var t=function(e){var t=e&&(s&&e[s]||e["@@iterator"]);if("function"==typeof t)return t}(e);if(!t)return!1;var r,n=t.call(e);if(t!==e.entries){for(;!(r=n.next()).done;)if(!b(r.value))return!1}else for(;!(r=n.next()).done;){var a=r.value;if(a&&!b(a[1]))return!1}return!0;default:return!1}}function h(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function v(e){if(null==e)return""+e;var t=h(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function E(e){var t=v(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return d.prototype=Error.prototype,f.checkPropTypes=a,f.resetWarningCache=a.resetWarningCache,f.PropTypes=f,f},h}()(C.isElement,!0)}else o.exports=function(){if(x)return E;x=1;var e=k();function t(){}function r(){}return r.resetWarningCache=t,E=function(){function n(t,r,n,a,o,i){if(i!==e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function a(){return n}n.isRequired=n;var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:t};return o.PropTypes=o,o}}()();var T=n(o.exports);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t){if(e){if("string"==typeof e)return I(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}function A(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function _(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}function M(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var n;const a=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),o=null!=(n=r.getItem(e))?n:null;return o instanceof Promise?o.then(a):a(o)},setItem:(e,n)=>r.setItem(e,JSON.stringify(n,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}const F=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then:e=>F(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>F(t)(e)}}},L=(e,t)=>(r,n,a)=>{let o={storage:j((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const c=new Set,u=new Set;let s=o.storage;if(!s)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...e)}),n,a);const l=()=>{const e=o.partialize({...n()});return s.setItem(o.name,{state:e,version:o.version})},f=a.setState;a.setState=(e,t)=>{f(e,t),l()};const m=e(((...e)=>{r(...e),l()}),n,a);let d;a.getInitialState=()=>m;const p=()=>{var e,t;if(!s)return;i=!1,c.forEach((e=>{var t;return e(null!=(t=n())?t:m)}));const a=(null==(t=o.onRehydrateStorage)?void 0:t.call(o,null!=(e=n())?e:m))||void 0;return F(s.getItem.bind(s))(o.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];if(o.migrate){const t=o.migrate(e.state,e.version);return t instanceof Promise?t.then((e=>[!0,e])):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]})).then((e=>{var t;const[a,i]=e;if(d=o.merge(i,null!=(t=n())?t:m),r(d,!0),a)return l()})).then((()=>{null==a||a(d,void 0),d=n(),i=!0,u.forEach((e=>e(d)))})).catch((e=>{null==a||a(void 0,e)}))};return a.persist={setOptions:e=>{o={...o,...e},e.storage&&(s=e.storage)},clearStorage:()=>{null==s||s.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>i,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},o.skipHydration||p(),d||m};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $={WILLINGNESS_CALIBRATION:"WILLINGNESS_CALIBRATION",OPENNESS_PRIMER:"OPENNESS_PRIMER",PERCEPTION_WORKSHOP:"PERCEPTION_WORKSHOP",CONTRAST_CLARITY_REFLECTION:"CONTRAST_CLARITY_REFLECTION",IMMEDIATE_RELIEF_PRACTICE:"IMMEDIATE_RELIEF_PRACTICE",REINFORCEMENT_BECOMING:"REINFORCEMENT_BECOMING"},B={PATTERN_PUZZLE:"PATTERN_PUZZLE",SEQUENCE_TAP:"SEQUENCE_TAP"},U="MENU",z="PATTERN_PUZZLE_RELIEF",V="AUDIO_BREATHE_RELIEF",W={AUDIO_BREATHE_CUE:"AUDIO_BREATHE_CUE",PATTERN_MICRO_PUZZLE_RELIEF:"PATTERN_MICRO_PUZZLE_RELIEF"},G={currentInterpretation:"",evidenceWrong:["",""],evidenceServing:["",""],alternativeFrames:[{id:"temp",text:"This is temporary because…",userCompletion:"",rating:0},{id:"teaching",text:"This stage is teaching me…",userCompletion:"",rating:0},{id:"confirms",text:"This experience confirms that I…",userCompletion:"",rating:0}],anchoredFrame:null},Y={clarityReflectionInput:"",clarityReflectionType:"text",clarityReflectionAudioBlob:null},H=t.create(L((function(e,t){return q(q(q({currentStage:$.WILLINGNESS_CALIBRATION,willingnessScore:50,opennessPrimerAttempts:0,opennessPrimerCurrentExercise:B.PATTERN_PUZZLE},G),Y),{},{journal:[],exitMessage:"",finalReinforcementMessage:"",immediateReliefCurrentSubStage:U,toast:{message:"",type:"info",visible:!1,id:null},theme:"light",toggleTheme:function(){return e((function(e){return{theme:"light"===e.theme?"dark":"light"}}))},setWillingnessScore:function(r){if(e({willingnessScore:r}),r<50){e({exitMessage:"Openness requires curiosity. Return when you're ready, or explore our Intro Guide for foundational practices."}),t()._prepareForReinforcement()}else e(r<70?{currentStage:$.OPENNESS_PRIMER,opennessPrimerAttempts:0,opennessPrimerCurrentExercise:B.PATTERN_PUZZLE,exitMessage:""}:{currentStage:$.PERCEPTION_WORKSHOP,exitMessage:""})},failOpennessPrimerAttempt:function(){var r=t().opennessPrimerAttempts+1;if(e({opennessPrimerAttempts:r}),r>=2){return e({exitMessage:"Openness requires curiosity. Return when you're ready, or explore our Intro Guide for foundational practices."}),t()._prepareForReinforcement(),!0}return t().opennessPrimerCurrentExercise===B.PATTERN_PUZZLE&&e({opennessPrimerCurrentExercise:B.SEQUENCE_TAP}),!1},succeedOpennessPrimer:function(){e({currentStage:$.PERCEPTION_WORKSHOP,opennessPrimerAttempts:0,exitMessage:""}),t().showToast("Alignment achieved!","success")},updateCurrentInterpretation:function(t){return e({currentInterpretation:t})},updateEvidence:function(t,r,n){var a="wrong"===t?"evidenceWrong":"evidenceServing";e((function(e){var t=A(e[a]);return t[r]=n,M({},a,t)}))},addEvidenceBullet:function(t){var r="wrong"===t?"evidenceWrong":"evidenceServing";e((function(e){var t=[].concat(A(e[r]),[""]);return t.length<=3?M({},r,t):{}}))},removeEvidenceBullet:function(t,r){var n="wrong"===t?"evidenceWrong":"evidenceServing";e((function(e){var t=A(e[n]);return t.length>2?(t.splice(r,1),M({},n,t)):{}}))},updateAlternativeFrameCompletion:function(t,r){e((function(e){return{alternativeFrames:e.alternativeFrames.map((function(e){return e.id===t?q(q({},e),{},{userCompletion:r}):e}))}}))},updateAlternativeFrameRating:function(t,r){e((function(e){return{alternativeFrames:e.alternativeFrames.map((function(e){return e.id===t?q(q({},e),{},{rating:Number(r)}):e}))}}))},commitAndAnchorFrame:function(){var r=t().alternativeFrames.filter((function(e){return""!==e.userCompletion.trim()})).reduce((function(e,t){return t.rating>((null==e?void 0:e.rating)||0)?t:e}),null);if(r){var n={statement:r.text,completion:r.userCompletion,fullText:"".concat(r.text.replace("…","")," ").concat(r.userCompletion),rating:r.rating,timestamp:(new Date).toISOString()};return e((function(e){return{anchoredFrame:n,journal:[].concat(A(e.journal),[n])}})),t().showToast("Frame anchored to journal!","success"),!0}return t().showToast("Please complete and rate at least one frame to anchor.","warning"),!1},proceedFromWorkshop:function(){e({currentStage:$.CONTRAST_CLARITY_REFLECTION})},setClarityReflectionText:function(t){e({clarityReflectionInput:t,clarityReflectionType:"text",clarityReflectionAudioBlob:null})},setClarityReflectionAudio:function(t,r){e({clarityReflectionInput:r,clarityReflectionType:"audio",clarityReflectionAudioBlob:t})},proceedFromClarity:function(){e({currentStage:$.IMMEDIATE_RELIEF_PRACTICE,immediateReliefCurrentSubStage:U})},startImmediateReliefExercise:function(t){"pattern"===t?e({immediateReliefCurrentSubStage:z}):"audio"===t&&e({immediateReliefCurrentSubStage:V})},completeImmediateReliefExercise:function(){t().showToast("Relief achieved!","success"),t()._prepareForReinforcement()},skipImmediateReliefPuzzle:function(){e({immediateReliefCurrentSubStage:U})},returnToReliefMenu:function(){e({immediateReliefCurrentSubStage:U})},_prepareForReinforcement:function(){var t=["You are not wrong, you are becoming.","This moment is the perfect launching pad.","Relief is always available."],r=Math.floor(Math.random()*t.length);e({finalReinforcementMessage:t[r],currentStage:$.REINFORCEMENT_BECOMING})},finishModuleAndReset:function(){e(q(q(q({currentStage:$.WILLINGNESS_CALIBRATION,willingnessScore:50,opennessPrimerAttempts:0,opennessPrimerCurrentExercise:B.PATTERN_PUZZLE},G),Y),{},{exitMessage:"",finalReinforcementMessage:"",immediateReliefCurrentSubStage:U,toast:{message:"",type:"info",visible:!1,id:null}}))},clearJournal:function(){return e({journal:[]})},showToast:function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,o=Date.now();e({toast:{message:r,type:n,visible:!0,id:o}}),setTimeout((function(){t().toast.id===o&&e((function(e){return{toast:q(q({},e.toast),{},{visible:!1})}}))}),a)},hideToast:function(){return e((function(e){return{toast:q(q({},e.toast),{},{visible:!1})}}))}})}),{name:"abundance-gps-storage",partialize:function(e){return{journal:e.journal,theme:e.theme}}}));function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],u=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,a=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t){var r=t.id,n=t.label,a=t.value,o=t.onChange,i=t.min,c=void 0===i?0:i,u=t.max,s=void 0===u?100:u,l=t.step,f=void 0===l?1:l,m=t.showValue,d=void 0===m||m,p=t.className,y=void 0===p?"":p;return e.createElement("div",{className:"slider-container ".concat(y)},e.createElement("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},n),e.createElement("div",{className:"flex items-center space-x-3"},e.createElement("input",{type:"range",id:r,name:r,min:c,max:s,step:f,value:a,onChange:function(e){o(Number(e.target.value))},className:"w-full h-2 bg-gray-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-600 dark:accent-blue-500","aria-valuemin":c,"aria-valuemax":s,"aria-valuenow":a,"aria-labelledby":"".concat(r,"-label")}),d&&e.createElement("span",{className:"text-sm text-gray-600 dark:text-gray-400 w-10 text-right tabular-nums"},a)),e.createElement("span",{id:"".concat(r,"-label"),className:"sr-only"},n))}function K(t){var r=t.children,n=t.onClick,a=t.variant,o=void 0===a?"primary":a,i=t.size,c=void 0===i?"md":i,u=t.disabled,s=void 0!==u&&u,l=t.className,f=void 0===l?"":l,m=t.type,d=void 0===m?"button":m,p=t.ariaLabel;return e.createElement("button",{type:d,onClick:n,disabled:s,"aria-label":p||("string"==typeof r?r:void 0),className:"\n        ".concat("font-semibold rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-800 transition-colors duration-150 ease-in-out","\n        ").concat({primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-gray-200 focus:ring-gray-400",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",link:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 focus:ring-blue-500 underline"}[o],"\n        ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[c],"\n        ").concat(s?"opacity-50 cursor-not-allowed":"","\n        ").concat(f,"\n      ")},r)}function Q(){var t=H((function(e){return e.setWillingnessScore})),r=H((function(e){return e.willingnessScore})),n=Z(e.useState(r||50),2),a=n[0],o=n[1],i=e.useRef(null);e.useEffect((function(){i.current&&i.current.focus()}),[]);return e.createElement("div",{className:"flex flex-col items-center space-y-8 animate-fadeIn"},e.createElement("h1",{ref:i,tabIndex:"-1",className:"text-2xl md:text-3xl font-semibold text-center text-gray-800 dark:text-gray-100"},"Willingness Calibration"),e.createElement("p",{className:"text-center text-gray-600 dark:text-gray-300 max-w-md"},"How ready are you to reframe your current perceptions and explore new perspectives on abundance?"),e.createElement("div",{className:"w-full max-w-sm"},e.createElement(J,{id:"willingness-slider",label:"Readiness to Reframe:",value:a,onChange:o,min:0,max:100,step:1})),e.createElement("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 italic"},a<50&&"A score below 50 suggests you might not be fully open to this process right now.",a>=50&&a<70&&"A moderate score. We'll start with some exercises to enhance openness.",a>=70&&"Great! You seem ready to dive in."),e.createElement(K,{onClick:function(){t(a)},size:"lg",ariaLabel:"Submit readiness score of ".concat(a)},"Continue"))}function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X.apply(null,arguments)}J.propTypes={id:T.string.isRequired,label:T.string.isRequired,value:T.number.isRequired,onChange:T.func.isRequired,min:T.number,max:T.number,step:T.number,showValue:T.bool,className:T.string},K.propTypes={children:T.node.isRequired,onClick:T.func,variant:T.oneOf(["primary","secondary","danger","link"]),size:T.oneOf(["sm","md","lg"]),disabled:T.bool,className:T.string,type:T.string,ariaLabel:T.string};var ee=[{id:"circle",component:function(t){return e.createElement("svg",X({viewBox:"0 0 100 100"},t),e.createElement("circle",{cx:"50",cy:"50",r:"40"}))},name:"Circle"},{id:"square",component:function(t){return e.createElement("svg",X({viewBox:"0 0 100 100"},t),e.createElement("rect",{x:"10",y:"10",width:"80",height:"80"}))},name:"Square"},{id:"triangle",component:function(t){return e.createElement("svg",X({viewBox:"0 0 100 100"},t),e.createElement("polygon",{points:"50,10 90,90 10,90"}))},name:"Triangle"},{id:"star",component:function(t){return e.createElement("svg",X({viewBox:"0 0 100 100"},t),e.createElement("polygon",{points:"50,5 61,35 95,35 67,57 78,87 50,68 22,87 33,57 5,35 39,35"}))},name:"Star"},{id:"hexagon",component:function(t){return e.createElement("svg",X({viewBox:"0 0 100 100"},t),e.createElement("polygon",{points:"25,10 75,10 95,50 75,90 25,90 5,50"}))},name:"Hexagon"},{id:"cross",component:function(t){return e.createElement("svg",X({viewBox:"0 0 100 100"},t),e.createElement("polygon",{points:"40,10 60,10 60,40 90,40 90,60 60,60 60,90 40,90 40,60 10,60 10,40 40,40"}))},name:"Cross"}];function te(t){var r=t.onSuccess,n=t.onFailure,a=Z(e.useState(null),2),o=a[0],i=a[1],c=Z(e.useState(null),2),u=c[0],s=c[1],l=Z(e.useState(""),2),f=l[0],m=l[1],d=H((function(e){return e.showToast})),p=e.useRef(null);e.useEffect((function(){i(function(){var e=[].concat(ee).sort((function(){return.5-Math.random()})).slice(0,9);if(e.length<3)throw new Error("Not enough shapes for the puzzle");for(var t=[[null,null,null],[null,null,null],[null,null,null]],r=0,n=A(e),a=Math.floor(3*Math.random()),o=Math.floor(3*Math.random()),i=0;i<3;i++)for(var c=0;c<3;c++)i===a&&c===o?t[i][c]=null:(t[i][c]=n[r%n.length]||n[0],r++);var u=n[r%n.length]||n[0],s=ee.filter((function(e){return e.id!==u.id}));s=s.sort((function(){return.5-Math.random()}));var l=[u,s[0],s[1]].sort((function(){return.5-Math.random()}));return{grid:t,missingShape:u,candidates:l,emptyCell:{row:a,col:o}}}()),s(null),m(""),p.current&&p.current.focus()}),[]);var y=o||{},g=y.grid,b=y.missingShape,h=y.candidates,v=y.emptyCell;return o?e.createElement("div",{className:"flex flex-col items-center space-y-6 animate-fadeIn p-4"},e.createElement("h2",{ref:p,tabIndex:"-1",className:"text-xl font-semibold text-gray-800 dark:text-gray-100"},"Pattern Alignment Micro-Puzzle"),e.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300 text-center"},"Complete the pattern in the grid by selecting the correct shape."),e.createElement("div",{className:"grid grid-cols-3 gap-1 p-2 bg-gray-200 dark:bg-slate-700 rounded","aria-label":"Pattern grid"},g.map((function(t,r){return t.map((function(t,n){var a,o,i,c=r===v.row&&n===v.col,s="correct"===f&&(r===v.row||n===v.col);return e.createElement("div",{key:"".concat(r,"-").concat(n),className:(a=c,o=s,i="w-16 h-16 md:w-20 md:h-20 border border-gray-300 dark:border-slate-600 flex items-center justify-center",i+=a?" bg-gray-100 dark:bg-slate-700":" bg-white dark:bg-slate-800",o&&"correct"===f&&(i+=" ring-2 ring-green-500"),i),"aria-label":c?"Empty cell":"Cell containing ".concat(null==t?void 0:t.name)},c?u&&"correct"===f?e.createElement(u.component,{className:"w-10 h-10 md:w-12 md:h-12 fill-current text-green-500"}):e.createElement("span",{className:"text-2xl text-gray-400 dark:text-slate-500"},"?"):t&&e.createElement(t.component,{className:"w-10 h-10 md:w-12 md:h-12 fill-current text-blue-500 dark:text-blue-400"}))}))}))),e.createElement("div",{className:"mt-4",role:"group","aria-label":"Candidate shapes"},e.createElement("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Choose the correct shape:"),e.createElement("div",{className:"flex space-x-3 justify-center"},h.map((function(t){return e.createElement("button",{key:t.id,onClick:function(){return e=t,void(f||(s(e),e.id===b.id?(m("correct"),d("Alignment achieved!","success"),setTimeout(r,1500)):(m("incorrect"),d("Not quite. Try to see the pattern.","error"),setTimeout(n,1500))));var e},disabled:!!f,"aria-label":"Select ".concat(t.name),className:"p-2 border-2 rounded-md hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400\n                ".concat((null==u?void 0:u.id)===t.id?"correct"===f?"border-green-500 bg-green-100 dark:bg-green-900":"incorrect"===f?"border-red-500 bg-red-100 dark:bg-red-900":"border-blue-500":"border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-800","\n                ").concat(f?"cursor-not-allowed":"cursor-pointer")},e.createElement(t.component,{className:"w-10 h-10 md:w-12 md:h-12 fill-current text-gray-700 dark:text-gray-200"}))})))),"incorrect"===f&&e.createElement("p",{className:"text-red-600 dark:text-red-400 text-sm mt-2"},"Incorrect. One more try on a different puzzle if this is your first attempt.")):e.createElement("div",{className:"text-center p-4"},"Loading puzzle...")}function re(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,a)}function ne(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){re(o,n,a,i,c,"next",e)}function c(e){re(o,n,a,i,c,"throw",e)}i(void 0)}))}}te.propTypes={onSuccess:T.func.isRequired,onFailure:T.func.isRequired};var ae={exports:{}},oe={exports:{}};!function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(oe);var ie=oe.exports;!function(e){var t=ie.default;function r(){e.exports=r=function(){return a},e.exports.__esModule=!0,e.exports.default=e.exports;var n,a={},o=Object.prototype,i=o.hasOwnProperty,c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,r,n){return Object.defineProperty(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{f({},"")}catch(n){f=function(e,t,r){return e[t]=r}}function m(e,t,r,a){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype);return f(i,"_invoke",function(e,t,r){var a=1;return function(o,i){if(3===a)throw Error("Generator is already running");if(4===a){if("throw"===o)throw i;return{value:n,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var u=S(c,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===a)throw a=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=3;var s=d(e,t,r);if("normal"===s.type){if(a=r.done?4:2,s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=4,r.method="throw",r.arg=s.arg)}}}(e,r,new C(a||[])),!0),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=m;var p={};function y(){}function g(){}function b(){}var h={};f(h,u,(function(){return this}));var v=Object.getPrototypeOf,E=v&&v(v(T([])));E&&E!==o&&i.call(E,u)&&(h=E);var x=b.prototype=y.prototype=Object.create(h);function w(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,r){function n(a,o,c,u){var s=d(e[a],e,o);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==t(f)&&i.call(f,"__await")?r.resolve(f.__await).then((function(e){n("next",e,c,u)}),(function(e){n("throw",e,c,u)})):r.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,u)}))}u(s.arg)}var a;f(this,"_invoke",(function(e,t){function o(){return new r((function(r,a){n(e,t,r,a)}))}return a=a?a.then(o,o):o()}),!0)}function S(e,t){var r=t.method,a=e.i[r];if(a===n)return t.delegate=null,"throw"===r&&e.i.return&&(t.method="return",t.arg=n,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=d(a,e.i,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.r]=i.value,t.next=e.n,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function k(e){this.tryEntries.push(e)}function R(e){var t=e[4]||{};t.type="normal",t.arg=n,e[4]=t}function C(e){this.tryEntries=[[-1]],e.forEach(k,this),this.reset(!0)}function T(e){if(null!=e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+" is not iterable")}return g.prototype=b,f(x,"constructor",b),f(b,"constructor",g),g.displayName=f(b,l,"GeneratorFunction"),a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,f(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},a.awrap=function(e){return{__await:e}},w(N.prototype),f(N.prototype,s,(function(){return this})),a.AsyncIterator=N,a.async=function(e,t,r,n,o){void 0===o&&(o=Promise);var i=new N(m(e,t,r,n),o);return a.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(x),f(x,l,"Generator"),f(x,u,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),a.keys=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},a.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r){i.type="throw",i.arg=e,t.next=r}for(var a=t.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o[4],c=this.prev,u=o[1],s=o[2];if(-1===o[0])return r("end"),!1;if(!u&&!s)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=c){if(c<u)return this.method="next",this.arg=n,r(u),!0;if(c<s)return r(s),!1}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var a=n;break}}a&&("break"===e||"continue"===e)&&a[0]<=t&&t<=a[2]&&(a=null);var o=a?a[4]:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a[2],p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[2]===e)return this.complete(r[4],r[3]),R(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r[0]===e){var n=r[4];if("throw"===n.type){var a=n.arg;R(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={i:T(e),r:t,n:r},"next"===this.method&&(this.arg=n),p}},a}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(ae);var ce=(0,ae.exports)(),ue=ce;try{regeneratorRuntime=ce}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=ce:Function("r","regeneratorRuntime = r")(ce)}var se=n(ue);function le(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.waveType,n=void 0===r?"sine":r,a=t.frequencies,o=void 0===a?[261.63,329.63,392,440]:a,i=t.duration,c=void 0===i?.3:i,u=t.volume,s=void 0===u?.3:u,l=e.useRef(null),f=e.useRef(null),m=Z(e.useState(!1),2),d=m[0],p=m[1],y=e.useCallback(ne(se.mark((function e(){var t,r;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.current){e.next=2;break}return e.abrupt("return");case 2:try{t=new(window.AudioContext||window.webkitAudioContext),l.current=t,(r=t.createGain()).gain.setValueAtTime(s,t.currentTime),r.connect(t.destination),f.current=r,"running"===t.state?p(!0):p(!1)}catch(e){console.error("Web Audio API initialization failed:",e),p(!1)}case 3:case"end":return e.stop()}}),e)}))),[s]),g=e.useCallback(ne(se.mark((function e(){var t;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=l.current)||"suspended"!==t.state){e.next=16;break}return e.prev=2,e.next=5,t.resume();case 5:p(!0),console.log("AudioContext resumed successfully."),e.next=14;break;case 9:throw e.prev=9,e.t0=e.catch(2),console.error("Failed to resume AudioContext:",e.t0),p(!1),e.t0;case 14:e.next=28;break;case 16:if(t){e.next=27;break}return e.next=19,y();case 19:if(!l.current||"suspended"!==l.current.state){e.next=24;break}return e.next=22,g();case 22:e.next=25;break;case 24:l.current&&"running"===l.current.state&&p(!0);case 25:e.next=28;break;case 27:"running"===t.state&&p(!0);case 28:case"end":return e.stop()}}),e,null,[[2,9]])}))),[y]);return e.useEffect((function(){return y(),function(){l.current&&"closed"!==l.current.state&&(l.current.close().catch(console.error),l.current=null)}}),[y]),{playTone:e.useCallback((function(e,t){var r=l.current,a=f.current;if(!r||"running"!==r.state)return console.warn("AudioContext not running. Cannot play tone."),void(t&&t());if(e<0||e>=o.length)return console.warn("Invalid tone index."),void(t&&t());var i=r.createOscillator();if(i.type=n,i.frequency.setValueAtTime(o[e],r.currentTime),i.connect(a),i.start(),t){var u=r.currentTime+c;i.stop(u),setTimeout(t,1e3*c)}else i.stop(r.currentTime+c)}),[n,o,c]),audioContext:l.current,isReady:d,resumeContext:g}}var fe=[{top:"top-2 left-1/2 -translate-x-1/2",label:"Top Circle"},{top:"top-1/2 right-2 -translate-y-1/2",label:"Right Circle"},{top:"bottom-2 left-1/2 -translate-x-1/2",label:"Bottom Circle"},{top:"top-1/2 left-2 -translate-y-1/2",label:"Left Circle"}];function me(t){var r=t.onSuccess,n=t.onFailure,a=Z(e.useState([]),2),o=a[0],i=a[1],c=Z(e.useState([]),2),u=c[0],s=c[1],l=Z(e.useState(null),2),f=l[0],m=l[1],d=Z(e.useState(null),2),p=d[0],y=d[1],g=Z(e.useState(!1),2),b=g[0],h=g[1],v=Z(e.useState(!1),2),E=v[0],x=v[1],w=Z(e.useState("Watch the sequence carefully."),2),N=w[0],S=w[1],k=H((function(e){return e.showToast})),R=le({duration:.3,frequencies:[261.63,329.63,392,440,523.25]}),C=R.playTone,T=R.resumeContext,I=R.isReady,O=R.initAudio,P=e.useRef(null),_=e.useRef([]),M=e.useCallback((function(){for(var e=[],t=0;t<4;t++)e.push(Math.floor(4*Math.random()));return i(e),e}),[]),j=e.useCallback(function(){var e=ne(se.mark((function e(t){var r,n;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(!0),x(!1),S("Memorize this sequence..."),m(null),s([]),r=0;case 6:if(!(r<t.length)){e.next=19;break}return n=t[r],m(n),C(n),e.next=12,new Promise((function(e){return setTimeout(e,500)}));case 12:if(m(null),!(r<t.length-1)){e.next=16;break}return e.next=16,new Promise((function(e){return setTimeout(e,100)}));case 16:r++,e.next=6;break;case 19:m(null),h(!1),x(!0),S("Your turn! Repeat the sequence."),_.current[0]&&_.current[0].focus();case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[C]),F=e.useCallback(function(){var e=ne(se.mark((function e(t){var a;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&!b){e.next=2;break}return e.abrupt("return");case 2:if(I){e.next=8;break}return e.next=5,T();case 5:if(I||isReady){e.next=8;break}return k("Audio not available. Please enable audio or check browser settings.","error"),e.abrupt("return");case 8:if(C(t),y(t),setTimeout((function(){return y(null)}),400),a=[].concat(A(u),[t]),s(a),o[a.length-1]===t){e.next=19;break}return x(!1),S("Incorrect sequence. Try again after reset."),k("Oops! That wasn't the right step.","error"),setTimeout((function(){n()}),1500),e.abrupt("return");case 19:4===a.length&&(x(!1),S("Correct! Focus restored."),k("Focus restored!","success"),m("all"),setTimeout((function(){m(null),r()}),1e3));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[E,b,u,o,C,r,n,k,I,T]);e.useEffect((function(){P.current&&P.current.focus(),O();var e=M();S("Get ready to memorize the sequence...");var t=setTimeout((function(){I?j(e):S('Click "Start Sequence" to begin and enable audio.')}),1500);return function(){return clearTimeout(t)}}),[]);var L=function(){var e=ne(se.mark((function e(){var t;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I){e.next=3;break}return e.next=3,T();case 3:o.length>0?j(o):(t=M(),j(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e.createElement("div",{className:"flex flex-col items-center space-y-6 p-4 animate-fadeIn"},e.createElement("h2",{ref:P,tabIndex:"-1",className:"text-xl font-semibold text-gray-800 dark:text-gray-100"},"Sequence Memory Tap"),e.createElement("p",{id:"status-message",role:"status",className:"text-sm text-center text-gray-600 dark:text-gray-300 min-h-[2em]"},N),!I&&!b&&e.createElement(K,{onClick:L,variant:"secondary",className:"mb-4"},"Start Sequence (Click to enable audio if needed)"),e.createElement("div",{className:"relative w-48 h-48 md:w-60 md:h-60 rounded-full border-2 border-gray-300 dark:border-slate-600 flex items-center justify-center","aria-label":"Sequence circles container"},fe.map((function(t,r){return e.createElement("button",{key:r,ref:function(e){return _.current[r]=e},"aria-label":t.label,"aria-pressed":f===r||p===r,disabled:!E||b,onClick:function(){return F(r)},onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),F(r))},className:"\n              absolute w-12 h-12 md:w-16 md:h-16 rounded-full transition-all duration-150 ease-in-out\n              focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-800\n              ".concat(t.top,"\n              ").concat(f===r||"all"===f&&p!==r?"bg-blue-500 scale-110":p===r?"bg-green-500 scale-110":"bg-gray-200 dark:bg-slate-700 hover:bg-gray-300 dark:hover:bg-slate-600","\n              ").concat(!E||b?"cursor-not-allowed opacity-70":"cursor-pointer","\n              ").concat(p===r&&o[u.length-1]!==r&&u.length<=o.length?"!bg-red-500":"","\n            ")})})),e.createElement("div",{className:"w-4 h-4 bg-gray-400 dark:bg-slate-500 rounded-full"})),e.createElement("div",{className:"mt-4 h-8"}))}function de(){var t=H((function(e){return e.opennessPrimerCurrentExercise})),r=H((function(e){return e.opennessPrimerAttempts})),n=H((function(e){return e.failOpennessPrimerAttempt})),a=H((function(e){return e.succeedOpennessPrimer})),o=e.useRef(null);e.useEffect((function(){o.current&&o.current.focus()}),[]);var i,c=function(){a()},u=function(){n()};return i=t===B.PATTERN_PUZZLE?e.createElement(te,{onSuccess:c,onFailure:u}):t===B.SEQUENCE_TAP?e.createElement("div",{className:"p-4 text-center"},e.createElement("p",{className:"text-lg font-semibold mb-2"},"Sequence Memory Tap"),e.createElement("p",{className:"text-gray-600 dark:text-gray-300"},"This exercise will test your focus and memory with an audio-visual sequence."),e.createElement("p",{className:"mt-4 text-orange-500"},"(SequenceMemoryTap component implementation pending)"),e.createElement("div",{className:"mt-4 space-x-2"},e.createElement("button",{onClick:c,className:"bg-green-500 text-white px-3 py-1 rounded"},"Simulate Success"),e.createElement("button",{onClick:u,className:"bg-red-500 text-white px-3 py-1 rounded"},"Simulate Failure"))):e.createElement("p",null,"Error: Unknown primer exercise."),e.createElement("div",{className:"animate-fadeIn"},e.createElement("h1",{ref:o,tabIndex:"-1",className:"text-2xl font-bold text-center mb-4 text-gray-800 dark:text-gray-100"},"Openness Primer"),e.createElement("p",{className:"text-center text-gray-600 dark:text-gray-300 mb-6"},"Let's engage your mind with a short exercise to enhance openness. You have ",2-r," attempt(s) remaining for this primer stage."),i)}function pe(t){var r=t.onComplete;return e.createElement("div",{className:"space-y-4 animate-slideUp"},e.createElement("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200"},"Step 1: Identify Current Interpretation (Stub)"),e.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300"},"Implementation pending."),e.createElement("div",{className:"flex justify-end"},e.createElement("button",{onClick:r,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded"},"Next (Stub)")))}function ye(t){var r=t.onComplete,n=t.onBack;return e.createElement("div",{className:"space-y-4 animate-slideUp"},e.createElement("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200"},"Step 2: Evidence Inventory (Stub)"),e.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300"},"Implementation pending."),e.createElement("div",{className:"flex justify-between mt-6"},e.createElement("button",{onClick:n,className:"px-4 py-2 bg-gray-200 rounded"},"Back (Stub)"),e.createElement("button",{onClick:r,className:"px-4 py-2 bg-blue-500 text-white rounded"},"Next (Stub)")))}function ge(t){var r=t.onComplete,n=t.onBack;return e.createElement("div",{className:"space-y-4 animate-slideUp"},e.createElement("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200"},"Step 3: Alternative Frame Generation (Stub)"),e.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300"},"Implementation pending. This will include editable frame templates and a star rating."),e.createElement("div",{className:"flex justify-between mt-6"},e.createElement("button",{onClick:n,className:"px-4 py-2 bg-gray-200 rounded"},"Back (Stub)"),e.createElement("button",{onClick:r,className:"px-4 py-2 bg-blue-500 text-white rounded"},"Next (Stub)")))}function be(t){var r=t.onComplete,n=t.onBack;return e.createElement("div",{className:"space-y-4 animate-slideUp"},e.createElement("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200"},"Step 4: Commit Anchor (Stub)"),e.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300"},"Implementation pending. This will include the anchor button and optional breath loop."),e.createElement("div",{className:"flex justify-between mt-6"},e.createElement("button",{onClick:n,className:"px-4 py-2 bg-gray-200 rounded"},"Back (Stub)"),e.createElement("button",{onClick:r,className:"px-4 py-2 bg-blue-500 text-white rounded"},"Complete Workshop (Stub)")))}me.propTypes={onSuccess:T.func.isRequired,onFailure:T.func.isRequired},pe.propTypes={onComplete:T.func.isRequired},ye.propTypes={onComplete:T.func.isRequired,onBack:T.func.isRequired},ge.propTypes={onComplete:T.func.isRequired,onBack:T.func.isRequired},be.propTypes={onComplete:T.func.isRequired,onBack:T.func.isRequired};var he={IDENTIFY:"IDENTIFY",EVIDENCE:"EVIDENCE",GENERATE_FRAMES:"GENERATE_FRAMES",COMMIT_ANCHOR:"COMMIT_ANCHOR"};function ve(){var t=Z(e.useState(he.IDENTIFY),2),r=t[0],n=t[1],a=H((function(e){return e.proceedFromWorkshop})),o=e.useRef(null);e.useEffect((function(){o.current&&o.current.focus()}),[r]);var i=function(){switch(r){case he.IDENTIFY:n(he.EVIDENCE);break;case he.EVIDENCE:n(he.GENERATE_FRAMES);break;case he.GENERATE_FRAMES:n(he.COMMIT_ANCHOR);break;case he.COMMIT_ANCHOR:a()}},c=function(){switch(r){case he.EVIDENCE:n(he.IDENTIFY);break;case he.GENERATE_FRAMES:n(he.EVIDENCE);break;case he.COMMIT_ANCHOR:n(he.GENERATE_FRAMES)}};return e.createElement("div",{className:"animate-fadeIn p-2 md:p-4 space-y-6"},e.createElement("h1",{ref:o,tabIndex:"-1",className:"text-2xl md:text-3xl font-bold text-center text-gray-800 dark:text-gray-100"},"Active Perception Reframing"),e.createElement("div",{className:"flex justify-center space-x-2 mb-6"},Object.values(he).map((function(t,n){return e.createElement("div",{key:t,className:"w-1/4 h-2 rounded-full ".concat(Object.values(he).indexOf(r)>=n?"bg-blue-500":"bg-gray-300 dark:bg-slate-700")})}))),r===he.IDENTIFY&&e.createElement(pe,{onComplete:i}),r===he.EVIDENCE&&e.createElement(ye,{onComplete:i,onBack:c}),r===he.GENERATE_FRAMES&&e.createElement(ge,{onComplete:i,onBack:c}),r===he.COMMIT_ANCHOR&&e.createElement(be,{onComplete:i,onBack:c}))}function Ee(){var t=H((function(e){return e.proceedFromClarity}));return e.createElement("div",{className:"space-y-4 animate-fadeIn"},e.createElement("h1",{className:"text-2xl font-bold text-center mb-4 text-gray-800 dark:text-gray-100"},"Contrast & Clarity Reflection (Stub)"),e.createElement("p",{className:"text-center text-gray-600 dark:text-gray-300"},"Implementation pending. This stage will allow text or audio reflection."),e.createElement("div",{className:"flex justify-center mt-6"},e.createElement("button",{onClick:t,className:"px-4 py-2 bg-blue-500 text-white rounded"},"Proceed (Stub)")))}function xe(){var t=H((function(e){return e.startImmediateReliefExercise}));return e.createElement("div",{className:"space-y-6 animate-fadeIn text-center"},e.createElement("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Immediate Relief Practice (Stub)"),e.createElement("p",{className:"text-gray-600 dark:text-gray-300"},"Choose a quick practice for immediate relief."),e.createElement("div",{className:"flex flex-col space-y-4 mt-6"},e.createElement("button",{onClick:function(){return t("pattern")},className:"px-4 py-2 bg-blue-500 text-white rounded"},"Pattern Micro-Puzzle (Stub)"),e.createElement("button",{onClick:function(){return t("audio")},className:"px-4 py-2 bg-blue-500 text-white rounded"},"Audio Breathe Cue (Stub)")),e.createElement("p",{className:"mt-4 text-orange-500"},"Implementation pending."))}function we(){var t=H((function(e){return e.completeImmediateReliefExercise})),r=H((function(e){return e.returnToReliefMenu}));return e.createElement("div",{className:"space-y-4 animate-fadeIn text-center"},e.createElement("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Pattern Micro-Puzzle Relief (Stub)"),e.createElement("p",{className:"text-gray-600 dark:text-gray-300"},"Implementation pending. Find the sequence."),e.createElement("div",{className:"flex justify-center space-x-4 mt-6"},e.createElement("button",{onClick:t,className:"px-4 py-2 bg-green-500 text-white rounded"},"Complete (Stub)"),e.createElement("button",{onClick:r,className:"px-4 py-2 bg-gray-200 rounded"},"Back to Menu (Stub)")),e.createElement("p",{className:"mt-4 text-orange-500"},"Implementation pending."))}function Ne(){var t=H((function(e){return e.completeImmediateReliefExercise})),r=H((function(e){return e.returnToReliefMenu}));return e.createElement("div",{className:"space-y-4 animate-fadeIn text-center"},e.createElement("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100"},"Audio Breathe Cue Relief (Stub)"),e.createElement("p",{className:"text-gray-600 dark:text-gray-300"},"Implementation pending. Audio-guided breathing practice."),e.createElement("div",{className:"flex justify-center space-x-4 mt-6"},e.createElement("button",{onClick:t,className:"px-4 py-2 bg-green-500 text-white rounded"},"Complete (Stub)"),e.createElement("button",{onClick:r,className:"px-4 py-2 bg-gray-200 rounded"},"Back to Menu (Stub)")),e.createElement("p",{className:"mt-4 text-orange-500"},"Implementation pending."))}function Se(t){var r=t.onComplete,n=H((function(e){return e.exitMessage})),a=H((function(e){return e.finalReinforcementMessage})),o=e.useRef(null);return e.useEffect((function(){o.current&&o.current.focus()}),[]),e.createElement("div",{className:"flex flex-col items-center justify-center text-center space-y-8 py-10 animate-fadeIn"},n&&e.createElement("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-800 border-l-4 border-yellow-400 dark:border-yellow-600 rounded-md"},e.createElement("p",{ref:o,tabIndex:"-1",className:"text-yellow-700 dark:text-yellow-200 font-medium"},n)),e.createElement("h1",{ref:n?null:o,tabIndex:n?void 0:-1,className:"text-3xl md:text-4xl font-serif font-medium text-gray-700 dark:text-gray-200"},a),e.createElement(K,{onClick:r,size:"lg",variant:"primary"},n?"Acknowledge & Reset":"Finish & Reset"))}Se.propTypes={onComplete:T.func.isRequired};var ke=function(){return e.createElement("span",{className:"text-green-500"},"✓")},Re=function(){return e.createElement("span",{className:"text-red-500"},"✗")},Ce=function(){return e.createElement("span",{className:"text-blue-500"},"ℹ")},Te=function(){return e.createElement("span",{className:"text-yellow-500"},"⚠")};function Ie(t){var n=t.message,a=t.type,o=void 0===a?"info":a,i=t.onDismiss,c=Z(e.useState(!1),2),u=c[0],s=c[1];e.useEffect((function(){s(!0)}),[n]);var l={success:r.CheckCircleIcon||ke,error:r.XMarkIcon||Re,warning:r.ExclamationTriangleIcon||Te,info:r.InformationCircleIcon||Ce}[o];return e.createElement("div",{role:"alert","aria-live":"assertive","aria-atomic":"true",className:"".concat("fixed bottom-5 right-5 md:bottom-10 md:right-10 p-4 rounded-lg shadow-lg flex items-center space-x-3 z-50 transition-all duration-300 ease-out"," ").concat({success:"bg-green-50 dark:bg-green-800 border-l-4 border-green-500 text-green-700 dark:text-green-200",error:"bg-red-50 dark:bg-red-800 border-l-4 border-red-500 text-red-700 dark:text-red-200",warning:"bg-yellow-50 dark:bg-yellow-800 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200",info:"bg-blue-50 dark:bg-blue-800 border-l-4 border-blue-500 text-blue-700 dark:text-blue-200"}[o]," ").concat(u?"opacity-100 translate-y-0":"opacity-0 translate-y-5")},e.createElement(l,{className:"h-6 w-6"}),e.createElement("p",{className:"flex-grow"},n),e.createElement("button",{onClick:i,"aria-label":"Dismiss notification",className:"p-1 rounded-md hover:bg-black/10 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-current"},e.createElement(r.XMarkIcon,{className:"h-5 w-5"})))}Ie.propTypes={message:T.string.isRequired,type:T.oneOf(["success","error","warning","info"]),onDismiss:T.func.isRequired};var Oe=function(){return e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-6.364-.386l1.591-1.591M3 12h2.25m.386-6.364l1.591 1.591M12 12a2.25 2.25 0 00-2.25 2.25A2.25 2.25 0 0012 16.5a2.25 2.25 0 002.25-2.25A2.25 2.25 0 0012 12z"}))},Ae=function(){return e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"}))};function Pe(){var t=H((function(e){return e.theme})),r=H((function(e){return e.toggleTheme}));return e.createElement("button",{onClick:r,"aria-label":"Switch to ".concat("light"===t?"dark":"light"," mode"),className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-slate-700 text-gray-600 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400"},"light"===t?e.createElement(Ae,null):e.createElement(Oe,null))}function _e(t){var r=t.onModuleComplete,n=t.initialTheme,a=H((function(e){return e.currentStage})),o=H((function(e){return e.theme})),i=H((function(e){return e.toast})),c=H((function(e){return e.hideToast})),u=H((function(e){return e.toggleTheme})),s=H((function(e){return e.finishModuleAndReset})),l=H().immediateReliefCurrentSubStage;e.useEffect((function(){!n||"light"!==n&&"dark"!==n||o!==n&&H.setState({theme:n})}),[n,o,u]),e.useEffect((function(){"dark"===o?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),[o]);return e.createElement("div",{className:"abundance-gps-module min-h-screen bg-gray-50 dark:bg-slate-900 text-gray-900 dark:text-gray-100 transition-colors duration-300 p-4 flex flex-col items-center justify-center font-sans"},e.createElement("div",{className:"absolute top-4 right-4"},e.createElement(Pe,null)),e.createElement("div",{className:"w-full max-w-2xl mx-auto shadow-xl rounded-lg bg-white dark:bg-slate-800 p-6 md:p-8"},function(){switch(a){case $.WILLINGNESS_CALIBRATION:return e.createElement(Q,null);case $.OPENNESS_PRIMER:return e.createElement(de,null);case $.PERCEPTION_WORKSHOP:return e.createElement(ve,null);case $.CONTRAST_CLARITY_REFLECTION:return e.createElement(Ee,null);case $.IMMEDIATE_RELIEF_PRACTICE:switch(l){case"PATTERN_PUZZLE_RELIEF":return e.createElement(we,null);case"AUDIO_BREATHE_RELIEF":return e.createElement(Ne,null);default:return e.createElement(xe,null)}case $.REINFORCEMENT_BECOMING:return e.createElement(Se,{onComplete:function(){r&&r(),s()}});default:return e.createElement("div",{className:"p-4 text-red-500"},"Error: Unknown stage or flow corruption. Please reset.",e.createElement("button",{onClick:s,className:"mt-2 p-2 bg-blue-500 text-white rounded"},"Reset Module"))}}()),i.visible&&e.createElement(Ie,{message:i.message,type:i.type,onDismiss:c}))}function Me(t){var r=t.rating,n=t.onRatingChange,a=t.maxStars,o=void 0===a?5:a,i=t.disabled,c=void 0!==i&&i,u=Array.from({length:o},(function(t,a){var i=a+1;return e.createElement("span",{key:a,className:"cursor-pointer text-xl ".concat(i<=r?"text-yellow-400":"text-gray-300"),onClick:function(){return!c&&n&&n(i)},role:"button","aria-label":"".concat(i," out of ").concat(o," stars")},"★")}));return e.createElement("div",{className:"flex space-x-1"},u)}_e.propTypes={onModuleComplete:T.func,initialTheme:T.oneOf(["light","dark"])},Me.propTypes={rating:T.number.isRequired,onRatingChange:T.func,maxStars:T.number,disabled:T.bool},exports.AbundanceGPS=_e,exports.ActivePerceptionReframingWorkshop=ve,exports.AlternativeFrameGeneration=ge,exports.AudioBreatheCue=Ne,exports.CommitAnchor=be,exports.ContrastClarityReflection=Ee,exports.EvidenceInventory=ye,exports.IdentifyInterpretation=pe,exports.ImmediateReliefPracticeMenu=xe,exports.OpennessPrimer=de,exports.PatternAlignmentPuzzle=te,exports.PatternMicroPuzzleRelief=we,exports.ReinforcementBecoming=Se,exports.SequenceMemoryTap=me,exports.StarRating=Me,exports.WillingnessCalibration=Q,exports.immediateReliefPracticeSubStages=W,exports.opennessPrimerSubStages=B,exports.perceptionWorkshopSubStages={IDENTIFY_INTERPRETATION:"IDENTIFY_INTERPRETATION",ALTERNATIVE_FRAME_GENERATION:"ALTERNATIVE_FRAME_GENERATION",EVIDENCE_INVENTORY:"EVIDENCE_INVENTORY"},exports.stages=$,exports.useAbundanceStore=H,exports.useAudioRecorder=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mimeType,r=void 0===t?"audio/webm":t,n=Z(e.useState("inactive"),2),a=n[0],o=n[1],i=Z(e.useState(null),2),c=i[0],u=i[1],s=Z(e.useState(null),2),l=s[0],f=s[1],m=Z(e.useState(!1),2),d=m[0],p=m[1],y=Z(e.useState(0),2),g=y[0],b=y[1],h=e.useRef(null),v=e.useRef([]),E=e.useRef(null),x=e.useRef(null);e.useEffect((function(){return"undefined"!=typeof window&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.MediaRecorder?p(!0):(p(!1),console.warn("MediaRecorder API or getUserMedia is not supported in this browser.")),function(){E.current&&E.current.getTracks().forEach((function(e){return e.stop()})),l&&URL.revokeObjectURL(l),x.current&&clearInterval(x.current)}}),[]);var w=function(){x.current&&clearInterval(x.current),b(0),x.current=setInterval((function(){b((function(e){return e+1}))}),1e3)},N=function(){x.current&&(clearInterval(x.current),x.current=null)},S=e.useCallback(ne(se.mark((function e(){var t;return se.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=4;break}return console.error("Audio recording is not supported."),o("inactive"),e.abrupt("return");case 4:if("recording"!==a){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,navigator.mediaDevices.getUserMedia({audio:!0});case 9:t=e.sent,E.current=t,h.current=new MediaRecorder(t,{mimeType:r}),v.current=[],h.current.ondataavailable=function(e){e.data.size>0&&v.current.push(e.data)},h.current.onstop=function(){var e=new Blob(v.current,{type:r});u(e);var t=URL.createObjectURL(e);f(t),o("finished"),N(),E.current&&(E.current.getTracks().forEach((function(e){return e.stop()})),E.current=null)},h.current.onstart=function(){o("recording"),w()},h.current.onpause=function(){o("paused"),N()},h.current.onresume=function(){o("recording"),w()},h.current.onerror=function(e){console.error("MediaRecorder error:",e),o("inactive"),N()},h.current.start(),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(6),console.error("Error accessing microphone or starting recorder:",e.t0),o("inactive");case 26:case"end":return e.stop()}}),e,null,[[6,22]])}))),[d,r,a]),k=e.useCallback((function(){!h.current||"recording"!==a&&"paused"!==a||h.current.stop()}),[a]),R=e.useCallback((function(){h.current&&"recording"===a&&h.current.pause()}),[a]),C=e.useCallback((function(){h.current&&"paused"===a&&h.current.resume()}),[a]),T=e.useCallback((function(){l&&URL.revokeObjectURL(l),u(null),f(null),o("inactive"),b(0),v.current=[],h.current&&h.current.state,E.current&&(E.current.getTracks().forEach((function(e){return e.stop()})),E.current=null),x.current&&clearInterval(x.current)}),[l]);return{startRecording:S,stopRecording:k,pauseRecording:R,resumeRecording:C,audioBlob:c,audioUrl:l,recorderState:a,isSupported:d,resetRecording:T,recordingTime:g}},exports.useSpeechSynthesis=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.onEnd,n=t.onError,a=Z(e.useState(!1),2),o=a[0],i=a[1],c=Z(e.useState(!1),2),u=c[0],s=c[1],l=Z(e.useState([]),2),f=l[0],m=l[1],d=e.useRef(null),p=e.useRef(null),y=e.useCallback((function(){if(d.current){var e=d.current.getVoices();e.length>0&&m(e)}}),[]),g=e.useCallback((function(){"undefined"!=typeof window&&"speechSynthesis"in window?(s(!0),d.current=window.speechSynthesis,y(),void 0!==d.current.onvoiceschanged&&(d.current.onvoiceschanged=y)):s(!1)}),[y]);return e.useEffect((function(){return g(),function(){d.current&&(d.current.onvoiceschanged=null,d.current.cancel())}}),[g]),{speak:e.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(u&&d.current&&e){d.current.speaking&&d.current.cancel();var s=new SpeechSynthesisUtterance(e);if(p.current=s,s.lang=t,s.rate=o,s.pitch=c,a){var l=f.find((function(e){return e.voiceURI===a}));l&&(s.voice=l)}s.onstart=function(){i(!0)},s.onend=function(){i(!1),r&&r()},s.onerror=function(e){i(!1),console.error("SpeechSynthesis Error:",e),n&&n(e),r&&r()},d.current.speak(s)}else r&&r()}),[u,f,r,n]),cancel:e.useCallback((function(){u&&d.current&&d.current.speaking&&d.current.cancel(),i(!1)}),[u]),isSpeaking:o,isSupported:u,voices:f,initSpeech:g}},exports.useWebAudioTones=le;
//# sourceMappingURL=index.js.map
